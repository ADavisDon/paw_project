<!DOCTYPE html>
<html>
  <head>
    <title>Myapp</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <%= render 'shared/header' %>
      <div class="info_container">
        <% if flash[:alert] %>
          <div class="alert"><%= flash[:alert] %></div>
        <% end %>

        <% if flash[:notice] %>
          <div class="notice"><%= flash[:notice] %></div>
        <% end %>
      </div>
    <br><br>
    <%= yield %>
  </body>
</html>

<script>
//Group logs by title
  for (i = 0; i < ($('.title').length);i++) {
    var firstCell = $('.title')[i].innerHTML;
    //debugger

    if ($('.title').length > 1 ) {
      if (i != 0) {
        if (firstCell == ($('.title')[i - 1].innerHTML)) {
          $('.title')[i].remove();
          document.getElementsByClassName("title")[i - 1].rowSpan += 1;
          i -= 1;
        }
      } else {
        if (firstCell == ($('.title')[i + 1].innerHTML)) {
          $('.title')[i + 1].remove();
          document.getElementsByClassName("title")[i].rowSpan += 1;
        }
      }
    }
  }

  for (i = 0; i < ($('.timestamp').length);i++) {
    var firstCell = $('.timestamp')[i].innerHTML;
    //debugger

    if ($('.timestamp').length > 1 ) {
      if (i != 0) {
        if (firstCell == ($('.timestamp')[i - 1].innerHTML)) {
          $('.timestamp')[i].remove();
          document.getElementsByClassName("timestamp")[i - 1].rowSpan += 1;
          i -= 1;
        }
      } else {
        if (firstCell == ($('.timestamp')[i + 1].innerHTML)) {
          $('.timestamp')[i + 1].remove();
          document.getElementsByClassName("timestamp")[i].rowSpan += 1;
        }
      }
    }
  }
</script>
